{"version":3,"file":"output.js","sources":["src/hooks.js","src/index.js"],"sourcesContent":["export const React = (() => {\r\n    \r\n    /**\r\n     * An array is used here so that we can set as many states as we want,\r\n     * not just one\r\n     */\r\n    let hooks = [];\r\n\r\n    /**\r\n     * This index will run through each and every state used in the component\r\n     */\r\n    let index = 0;\r\n\r\n    /**\r\n     * Naive implementation of useState\r\n     */\r\n    function useState(initialValue) {\r\n        /** A localIndex is created as the setter function gets called after the useState call\r\n         * and if we don't use this var, setter might set value at a wrong index\r\n         */\r\n        let localIndex = index;\r\n        index++;\r\n\r\n        if (hooks[localIndex] === undefined) {\r\n            hooks[localIndex] = initialValue;\r\n        }\r\n        const setterFunction = (newValue) => {\r\n            hooks[localIndex] = newValue;\r\n        }\r\n        return [hooks[localIndex], setterFunction];\r\n    }\r\n\r\n    /**\r\n     * We need to reset the index after one render cycle\r\n     */\r\n    function resetIndex() {\r\n        index = 0;\r\n    }\r\n\r\n    /**\r\n     * Naive implementation of useEffect\r\n     */\r\n    function useEffect(callback, dependencyArray) {\r\n        /** Initial value is true because if no dependencyArray is provided,\r\n         * callback should execute\r\n         */\r\n        let hasChanged = true;\r\n\r\n        let oldDependencies = hooks[index];\r\n\r\n        if (oldDependencies) {\r\n            /** It is set to false here first because, if we pass an empty array,\r\n             * callback should not execute after the first time\r\n             */\r\n            hasChanged = false;\r\n            dependencyArray.forEach((dep, index) => {\r\n                if (!Object.is(dep, oldDependencies[index])) {\r\n                    hasChanged = true;\r\n                }\r\n            })\r\n        }\r\n\r\n        /** If any dependency has changed, execute the callback */\r\n        if (hasChanged) {\r\n            callback();\r\n        }\r\n\r\n        hooks[index] = dependencyArray;\r\n        index++;\r\n    }\r\n    \r\n    return {\r\n        useState,\r\n        useEffect,\r\n        resetIndex\r\n    }\r\n})();","import { React } from \"./hooks\";\r\n\r\nconst { useState, resetIndex, useEffect } = React;\r\n\r\nconst Component = () => {\r\n    const [counter, setCounter] = useState(0);\r\n    const [name, setName] = useState(\"Sanjeet\");\r\n    console.log(\"Counter\", counter);\r\n    console.log(\"Name\", name);\r\n    \r\n    useEffect(() => {\r\n        console.log(\"useEffect\");\r\n    }, [name])\r\n\r\n    if (counter !== 1) {\r\n        setCounter(1);\r\n    }\r\n\r\n    if (name !== \"Tiwari\" && counter === 1) {\r\n        setName(\"Tiwari\");\r\n    }\r\n}\r\n\r\nconsole.log(Component());\r\nresetIndex();\r\nconsole.log(Component());\r\nresetIndex();\r\nconsole.log(Component());"],"names":[],"mappings":"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"}